{% extends 'base.html' %}
{% load static %}

{% block title %}Create Measure - Tool Program{% endblock %}

{% block content %}
<div class="d-flex mt-4 mb-3">
    <div class="w-auto me-5">
        <h1 class="mt-2">Add New Measure</h1>
        <h4>Tool Measurement</h4>
    </div>
    <div class="w-auto ms-5">
        <div class="d-flex align-items-center ms-1">
            <img alt="Measure Add Icon" class="img-fluid" width="100" src="{% static 'images/MeasureAdd.png' %}" />
        </div>
    </div>
</div>
<hr />

<div class="row">
    <div class="col-md-6">
        <form method="post">
            {% csrf_token %}
            
            <div class="form-group mb-3">
                <label for="tool_select" class="control-label">Tool</label>
                <select id="tool_select" name="tool_id" class="form-control" required>
                    <option value="">Select a tool...</option>
                    {% for tool in tools %}
                        <option value="{{ tool.id }}">{{ tool.name }} ({{ tool.serial_number }})</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group mb-3">
                <label for="employee_select" class="control-label">Employee</label>
                <select id="employee_select" name="employee_id" class="form-control" required>
                    <option value="">Select an employee...</option>
                    {% for emp in employees %}
                        <option value="{{ emp.id }}">{{ emp.full_name }} ({{ emp.employee_number }})</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group mb-3">
                <label for="work_center_select" class="control-label">Work Center</label>
                <select id="work_center_select" name="work_center_id" class="form-control">
                    <option value="">Select a work center...</option>
                    {% for wc in workcenters %}
                        <option value="{{ wc.id }}">{{ wc.name }} - {{ wc.location }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group mb-3">
                <label for="size_measured" class="control-label">Size Measured</label>
                <input type="number" step="0.0001" id="size_measured" name="size_measured" class="form-control" required />
            </div>

            <div class="form-group mb-3">
                <label for="expected_size" class="control-label">Expected Size</label>
                <input type="number" step="0.0001" id="expected_size" name="expected_size" class="form-control" />
            </div>

            <div class="form-group mb-3">
                <label for="tolerance" class="control-label">Tolerance</label>
                <input type="number" step="0.0001" id="tolerance" name="tolerance" class="form-control" />
            </div>

            <div class="form-group mb-3">
                <label for="condition" class="control-label">Condition</label>
                <select id="condition" name="condition" class="form-control">
                    <option value="GOOD">Good</option>
                    <option value="FAIR">Fair</option>
                    <option value="POOR">Poor</option>
                    <option value="NEEDS_REPAIR">Needs Repair</option>
                </select>
            </div>

            <div class="form-group mb-3">
                <label for="notes" class="control-label">Notes</label>
                <textarea id="notes" name="notes" class="form-control" rows="3" placeholder="Additional notes about the measurement..."></textarea>
            </div>

            <div class="form-group">
                <input type="submit" value="Add Measure" class="btn btn-primary buttonPurple" />
                <a href="{% url 'measure:index' %}" class="btn btn-secondary ms-2">Cancel</a>
            </div>
        </form>
    </div>
    
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5>Measurement Guidelines</h5>
            </div>
            <div class="card-body">
                <h6>Condition Ratings:</h6>
                <ul>
                    <li><strong>Good:</strong> Tool is in excellent working condition</li>
                    <li><strong>Fair:</strong> Tool shows minor wear but is usable</li>
                    <li><strong>Poor:</strong> Tool shows significant wear</li>
                    <li><strong>Needs Repair:</strong> Tool requires maintenance</li>
                </ul>
                
                <h6 class="mt-3">Measurement Tips:</h6>
                <ul>
                    <li>Use appropriate measuring instruments</li>
                    <li>Record measurements to 4 decimal places when possible</li>
                    <li>Include expected size and tolerance for quality tracking</li>
                    <li>Add notes for any unusual observations</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="mt-2">
    <a href="{% url 'measure:index' %}">Back to List</a>
</div>
{% endblock %}